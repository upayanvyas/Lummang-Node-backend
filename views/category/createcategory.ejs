<!doctype html>
<html lang="en" dir="ltr">
    <head>

        <%- include('../common/_head');-%>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />

    </head>

</html> 


<body class="app sidebar-mini" style="font-family: inter-regular;">

    <!-- GLOBAL-LOADER -->
    <div id="global-loader">
        <img src="/images/svgs/loader.svg" class="loader-img" alt="Loader">
    </div>

    <div class="page">
        <div class="page-main">
            <!-- HEADER -->
           
            <%- include('../common/_header');-%>
            <!-- HEADER END -->

            <!-- APP SIDEBAR -->

            <%- include('../common/_leftsidebar');-%>
            
            <!-- APP SIDEBAR CLOSED -->

            <!-- CONTAINER -->
            <div class="app-content">
                <div class="section">

                   

                    <!-- PAGE-HEADER -->
                    <div class="page-header">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#"><i class="fe fe-home mr-1"></i> Masters</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Category</li>
                        </ol>
                        <div class="ml-auto">
                            <a href="/allcategory" class="btn btn-primary btn-icon btn-sm text-white mr-2">
                                <span>
                                    <i class="fe fe-plus"></i>
                                </span> Category List
                            </a>
                        </div>
                    </div>
                    <!-- PAGE-HEADER END -->

                   
                   
                   
                    <!-- ROW-5 -->
                    <div class="row">
                        <div class="col-12 col-sm-12">
                            <div class="card ">
                                <div class="card-header">
                                    <div class="card-title mb-0">Category Create</div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
										<form method="post" action="/createcategory" 
										enctype="multipart/form-data">
								
										<div id="treeview">
										</div>
											<div class="form-group">
												<label for="Category">Category Name</label>
												<input type="text" class="form-control" id="Category" name="categoryname" placeholder="Category Name">
											  </div>
											  <div class="form-group">
												<label for="inputAlias">Alias</label>
												<input type="text" class="form-control" name="alias" id="inputAlias" placeholder="Alias">
											  </div>
											  <div class="form-group">
												<label for="inputIcon">Icon</label>
												<input type="file" class="form-control" name="icon" id="inputIcon" placeholder="Icon">
											  </div>
											  
											  <div class="form-row" id="all">
												<div class="form-group">
												
												  <div class="wrap-input100 validate-input" data-validate="primary">
													<input class="input100" type="hidden" name="primary" placeholder="primary" 
														id="primary" value="">
													<span class="focus-input100"></span>
													<span class="symbol-input100">
								
													</span>
													
												</div>
												
												<button type="submit"   class="btn btn-primary">Save</button>
												
											</div>
										</form>
                                    </div>
                                </div>
                            </div>
                        </div><!-- COL END -->
                    </div><!-- ROW-5 END -->
                </div>
                <!-- CONTAINER END -->
            </div>
        </div>

    

        <!-- FOOTER -->
        <%- include('../common/_footer');-%>
        <!-- FOOTER CLOSED -->
    </div>

    <!-- BACK-TO-TOP -->
   
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>

<script>
	$(function () {
		$('#treeview').jstree({
			'core': {
				'data': {
					'url': '/getParentChildNodesWithPrimary',
                  
					'data': function (node) {
						console.log(node);
						return { 'id': node.id };
					}
				}
			}
		});

		$('#treeview').on('changed.jstree', function (e, data) {
			var i, j, r = [];
			for (i = 0, j = data.selected.length; i < j; i++) {

				r.push(data.instance.get_node(data.selected[i]));

			}
			console.log(r[0])
			categoryId = r[0].id;
			$("#primary").val(r[0].id);
			// $('#event_result').html('Selected: ' + r.join(', '));
		}).jstree();
	});
</script>

</body>


<!-- GLOBAL-LOADER -->
		
					<!-- APP SIDEBAR CLOSED -->
                   
                    <!-- CONTAINER -->
                    
             
            